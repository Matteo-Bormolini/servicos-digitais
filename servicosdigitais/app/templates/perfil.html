{% extends 'estrutura/base.html' %}

{% block body %}
<section class="perfil-container mx-auto">

    <div class="card perfil-card position-relative">
        <div class="card-body">

            <!-- BOTÃO OCULTAR DADOS (TOPO DIREITO) -->
            {% if eh_dono %}
                <form method="post"
                      action="{{ url_for('perfil.toggle_ocultar', user_id=usuario.id) }}"
                      class="position-absolute top-0 end-0 m-3">
                    <button type="submit"
                            class="btn btn-sm btn-outline-secondary">
                        {% if usuario.ocultar_dados %}
                            Mostrar dados
                        {% else %}
                            Ocultar dados
                        {% endif %}
                    </button>
                </form>
            {% endif %}

            <!-- FOTO + DADOS -->
            <div class="d-flex gap-3 align-items-start">

                <img src="{{ foto_url }}"
                     alt="Foto de perfil"
                     class="perfil-foto rounded-3">

                <div class="flex-grow-1">

                    <h5 class="mb-2">{{ nome_completo }}</h5>

                    <p class="mb-1">
                        <strong>E-mail:</strong><br>
                        {% if usar_blur %}
                            <span class="borrado-inline sensitive-field">
                                {{ email_display }}
                            </span>
                        {% else %}
                            {{ email_display }}
                        {% endif %}
                    </p>

                    <p class="mb-1">
                        <strong>Documento:</strong><br>
                        {% if usar_blur %}
                            <span class="borrado-inline sensitive-field">
                                {{ documento_display }}
                            </span>
                        {% else %}
                            {{ documento_display }}
                        {% endif %}
                    </p>

                    <p class="mb-1">
                        <strong>Telefone:</strong><br>
                        {% if usar_blur %}
                            <span class="borrado-inline sensitive-field">
                                {{ telefone_display }}
                            </span>
                        {% else %}
                            {{ telefone_display }}
                        {% endif %}
                    </p>

                </div>
            </div>

            <hr>

            <!-- SERVIÇOS EXTRAS -->
            <div>
                <strong>Serviços extras</strong>
                <p class="mb-0">
                    {{ usuario.descricao or 'Nenhuma informação adicional.' }}
                </p>
            </div>

            {% if eh_dono %}
                <hr>
                <div class="d-grid">
                    <a href="{{ url_for('perfil.editar_perfil') }}"
                       class="btn btn-primary">
                        Editar perfil
                    </a>
                </div>
            {% endif %}

        </div>
    </div>

</section>
{% endblock %}

{% block scripts %}
{% include 'estrutura/perfil_blur.html' %}
{% endblock %}
